<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Hello World!</title>
    </head>
    <body>
        <script type="">
        async function recordAndCalculateFrequency() {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        const mediaRecorder = new MediaRecorder(stream);
        const audioChunks = [];

        mediaRecorder.addEventListener("dataavailable", (event) => {
            audioChunks.push(event.data);
        });

        mediaRecorder.addEventListener("stop", () => {
            const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
            const reader = new FileReader();
            reader.readAsArrayBuffer(audioBlob);
            reader.onload = function() {
            const audioContext = new AudioContext();
            audioContext.decodeAudioData(reader.result, function(buffer) {
                const channelData = buffer.getChannelData(0);
                let sum = 0;
                for (let i = 0; i < channelData.length; i++) {
                sum += Math.abs(channelData[i]);
                }
                const averageFrequency = sum / channelData.length;
                console.log('Average frequency:', averageFrequency);
            });
            };
        });

        mediaRecorder.start();

        setTimeout(() => {
            mediaRecorder.stop();
        }, 2000);
        }
        recordAndCalculateFrequency();
        </script>
    </body>
</html>
